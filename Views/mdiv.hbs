<section class="section">
    <div class="section" id="notif" style="transition: 0.5s;">
    </div>
    <div class="section-header">
        <h1>Dashboard / Matriks / Divisi / {{bread.subkategori}} <a href="/m/divisi/reset/{{id_reset}}" class="btn btn-danger btn-sm"><i class="fa fa-sync"></i> RESET</a></h1>
    </div>

    <div class="row">
        <div class="col-12 d-flex justify-content-between flex-wrap">
            <div class="card col-sm-12 col-md-6 col-lg-4 p-0 pr-4">
                <div class="card-body p-0 d-flex align-items-center " style="color: black !important;">
                    <div class="d-flex flex-wrap justify-content-start">

                        {{#each mkat}}
                        <div style="margin-left:-2em" class="col-12 py-2 d-flex justify-content-between">
                            <div class="col-6 text-right">
                                <span>{{key1.dataValues.divisi}}</span>
                            </div>
                            <select val="{{dataValues.nilai}}" oninput="change('{{dataValues.id_mdiv}}',this)" class="mk form-control col-3" name="" id="">
                                <option value="1">1 - sama penting dari</option>
                                <option value="2">2 - mendekati sedikit lebih penting dari</option>
                                <option value="3">3 - sedikit lebih penting dari</option>
                                <option value="4">4 - emdekati lebih penting dari</option>
                                <option value="5">5 - lebih penting dari</option>
                                <option value="6">6 - emdekati lebih mutlak penting dari</option>
                                <option value="7">7 - lebih mutlak dari</option>
                                <option value="8">8 - mendekati mutlak penting dari</option>
                            <option value="9" selected="">9 - mutlak penting dari</option>
                            <option value="0.5">1/2 - mendekati sedikit lebih tidak penting dari</option>
                            <option value="0.33">1/3 - sedikit lebih tidak penting dari</option>
                            <option value="0.25">1/4 - mendekati lebih tidak penting dari</option>
                            <option value="0.2">1/5 - lebih tidak penting dari</option>
                            <option value="0.166">1/6 - mendekati lebih mutlak tidak dari</option>
                            <option value="0.142">1/7 - lebih mutlak tidak dari</option>
                            <option value="0.125">1/8 - mendekati mutlak tidak penting dari</option>
                            <option value="0.11">1/9 - mutlak tidak penting dari</option>
                        </select>
                            <div class="col-6">
                                <span>{{key2.dataValues.divisi}}</span>
                            </div>
                        </div>
                        {{/each}}
                    </div>
                </div>
            </div>
            <div class="card pt-2 col-sm-12 col-md-6 col-lg-8">
                <div class="card-body p-2">
                    <div class="table-responsive">
                        <table class="table text-center" style="font-size: 120%;border:1px solid rgb(129 223 252)">
                            <thead>
                                <tr>
                                    <th style="background-color: #98d5fd;color:#0969b8">divisi</th>
                                    {{#each kat}}
                                    <th class="text-primary" style="background:#a0f2ff;border:1px solid rgb(129 223 252)">{{divisi}}</th>
                                    {{/each}}
                                </tr>
                            </thead>
                            <tbody>
                                {{#each kat}}
                                <tr style="border:1px solid rgb(129 223 252)">
                                    <th class="text-primary" style="background:#a0f2ff;">{{divisi}}</th>
                                    {{#each arr}}
                                    <td style="background-color: #e4f8fd;color:#0da0e4;border:1px solid rgb(129 223 252)">
                                        <b>
                                        {{this}}
                                        </b>
                                    </td>
                                    {{/each}}
                                </tr>
                                {{/each}}
                                <tr>
                                    <th style="background-color: #f6b2fc;color:#cb0de4;border:1px solid rgb(248, 77, 148)">Total</th>
                                    {{#each result.total}}
                                    <td style="background-color: #f6b2fc;color:#cb0de4;border:1px solid rgb(248, 77, 148)"><b>{{this}}</b></td>
                                    {{/each}}
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
            <div class="card col-12">
                <div class="card-body p-2">
                    <div class="table-responsive mt-2">
                        <table class="table text-center" style="font-size: 120%;">
                            <thead>
                                <tr>
                                    <th class="col-2" style="background-color: #fc9e81;color:#e73a05;border:1px solid rgb(246 178 252)">Normalisasi</th>
                                    {{#each kat}}
                                    <th style="background-color: #fce581;color:#e77e05;border:1px solid rgb(246 178 252)">{{divisi}}</th>
                                    {{/each}}
                                    <th style="background-color: #81dffc;color:#058de7;border:1px solid rgb(246 178 252)">TOTAL</th>
                                    <th style="background-color: #81fcbe;color:#04b353;border:1px solid rgb(246 178 252)">BOBOT</th>

                                </tr>
                            </thead>
                            <tbody>
                                {{#each kat}}
                                <tr>
                                    <th style="background-color: #fce581;color:#e79805;border:1px solid rgb(246 178 252)">{{divisi}}</th>
                                    {{#each norm}}
                                    <td style="background-color: #fdf2c1;color:#fa8659;border:1px solid rgb(246 178 252)"><b>{{this}}</b></td>
                                    {{/each}}
                                    <td style="background-color: #dbfaff;color:#058de7;border:1px solid rgb(246 178 252)">
                                        <b> {{lookup ../result.ntotal @index}} </b>
                                    </td>
                                    <td style="background-color: #d3fde9;color:#04b353;border:1px solid rgb(246 178 252)">
                                        <b> {{lookup ../result.bobot @index}}</b>
                                    </td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </div>
                    <div class="card" style="background-color: rgb(253, 218, 218);">
                        <div class="card-body">
                            <table style="color:rgb(255, 0, 106);font-size: 150%;">
                                <tr>
                                    <td>Î» max</td>
                                    <td class="px-1">=</td>
                                    <td>{{result.lambda}}</td>
                                </tr>
                                <tr>
                                    <td>IR</td>
                                    <td>=</td>
                                    <td>{{result.ir}}</td>
                                </tr>
                                <tr>
                                    <td>CI</td>
                                    <td>=</td>
                                    <td>{{result.ci}}</td>
                                </tr>
                                <tr>
                                    <td>CR</td>
                                    <td>=</td>
                                    <td>{{result.cr}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<link rel="stylesheet" href="/assets/css/sweetalert2.min.css">
<link rel="stylesheet" href="/assets/css/animate.min.css">
<script src="/assets/js/sweetalert2.all.min.js"></script>
<script>
    window.onload = () => {
        if ("{{info}}" == "failed") {
            const notif = document.getElementById("notif")
            notif.innerHTML = `
                <div class="alert alert-danger" role="alert">
                    <h4>
                        <i class="fa fa-check-circle"></i> &nbsp; gagal
                    </h4>
                </div>
                `;
            setTimeout(() => {
                notif.innerHTML = "";
            }, 2500)
        } else if ("{{info}}" == "edit") {
            const notif = document.getElementById("notif")
            notif.innerHTML = `
                <div class="alert alert-success" role="alert">
                    <h4>
                        <i class="fa fa-check-circle"></i> &nbsp; berhasil
                    </h4>
                </div>
                `;
            setTimeout(() => {
                notif.innerHTML = "";
            }, 2500)
        }
        console.log("{{info}}")
        $(".mk").each(function() {
            const val = $(this).attr("val")
            $(this).children().each(function() {
                if (val == $(this).val())
                    $(this).attr("selected", "selected")
            })
        })
    }
    const change = (v, t) => {
        console.log(`/m/divisi/ubah/{{bread.id_sub}}/${v}/${t.value}`)
        window.location.href = `/m/divisi/ubah/{{bread.id_sub}}/${v}/${t.value}`;
    }
</script>